<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>ftb | 扯淡窝</title>
  <meta name="author" content="hellovigoss">

  
  <meta name="description" content="ftb全称 frontend to backend，是一款用来贯穿前端与后端的项目。
项目背景随着web开发的多元性，最基本的特征就是面向用户的前端开发与面向业务逻辑的后端开发职责分离、各司其职。现有ajax方案还是不免使得前端开发人员与后端开发人员进行接口协商，约束调用url、变量等信息。ftb即">
  
  

  <link rel="alternate" href="/atom.xml" title="扯淡窝" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <script src="http://libs.baidu.com/jquery/1.9.0/jquery.js"></script>
</head>


<body>
  <header id="header" class="inner"><nav>
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
</nav></header>
  <div id="content" class="inner"><article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <header>
    
  
    <h1 class="title">ftb</h1>
  

    <time datetime="2015-05-23T11:48:43.000Z">
  <span class="day">23</span><span class="month">May</span>
</time>
  </header>
  <div class="entry-content">
    
      <h1 id="ftb">ftb</h1><p>全称 frontend to backend，是一款用来贯穿前端与后端的项目。</p>
<h3 id="项目背景">项目背景</h3><p>随着web开发的多元性，最基本的特征就是面向用户的前端开发与面向业务逻辑的后端开发职责分离、各司其职。<br>现有ajax方案还是不免使得前端开发人员与后端开发人员进行接口协商，约束调用url、变量等信息。<br>ftb即为了打通前后端所做之努力。</p>
<h3 id="工具特点">工具特点</h3><ul>
<li>非侵入式代码，注解模式提供生成标签，抛弃冗长的dsl编写</li>
<li>全局可配置默认ajax方案，独立配置各子调用项目</li>
<li>采用nodejs开发，高效的文件操作与代码生成</li>
<li>全量/压缩目的文件输出</li>
</ul>
<h3 id="使用方法">使用方法</h3><ul>
<li>git clone </li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/hellovigoss/ftb.git</span><br></pre></td></tr></table></figure>
<ul>
<li>安装运行时环境node,<a href="https://nodejs.org/" target="_blank" rel="external">https://nodejs.org/</a></li>
<li>编写全局配置</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#js&#32570;&#30465;&#37197;&#32622;&#10;baseurl=http://myftb.com/ #&#39033;&#30446;&#26681;&#22320;&#22336;&#10;dataType=json             #ajax&#25968;&#25454;&#20132;&#20114;&#31867;&#22411;&#10;type=POST                 #ajax&#25968;&#25454;&#20132;&#20114;&#26041;&#24335;&#10;cache=false               #ajax&#32531;&#23384;&#37197;&#32622;&#10;async=true                #&#26159;&#21542;&#21516;&#27493;&#10;#&#33258;&#23450;&#20041;&#30456;&#20851;&#27491;&#21017;&#21305;&#37197;&#37197;&#32622;&#10;sectionReg=\/\/\@ftb *(.*?)\W*?(\/[\W\w]*?\/)?\W*?function *(\w*?)\(.*\)    #&#33719;&#21462;ftb&#25551;&#36848;&#27573;&#30340;&#27491;&#21017;&#10;paramsReg=\@params?\W*(\w*).*ftb    #&#33719;&#21462;&#21442;&#25968;&#30340;&#24490;&#29615;&#27491;&#21017;&#10;typeReg=\@(type)\W*(\w*).*ftb    #ajax&#21333;&#29420;&#37197;&#32622;&#30456;&#20851;&#27491;&#21017;&#10;cacheReg=\@(cache)\W*(\w*).*ftb&#10;dataTypeReg=\@(dataType)\W*(\w*).*ftb&#10;asyncReg=\@(async)\W*(\w*).*ftb&#10;#&#31995;&#32479;&#37197;&#32622;&#10;shuffix=php               #&#25195;&#25551;&#21046;&#23450;&#21518;&#32512;&#25991;&#20214;&#10;output=output.js          #&#36755;&#20986;&#25991;&#20214;&#10;compress=on|off           #&#26159;&#21542;&#24320;&#21551;&#36755;&#20986;&#21387;&#32553;&#10;encoding=utf-8            #&#35835;&#21462;&#20197;&#21450;&#36755;&#20986;&#25991;&#20214;&#32534;&#30721;&#10;output=ftb-output         #&#36755;&#20986;&#30446;&#24405;&#10;outputFile=output.js      #&#21512;&#24182;&#36755;&#20986;&#25991;&#20214;&#21517;</span><br></pre></td></tr></table></figure>
<ul>
<li>后端直接进行业务开发</li>
<li>按ftb注释规范进行注释</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span> <span class="keyword">extends</span> <span class="title">Controller</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">parent</span>::__construct();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//@ftb actionAlias</span></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * <span class="doctag">@ns</span> com.iflytek.ftb.demo ftb</span><br><span class="line">     * <span class="doctag">@params</span> $a ftb</span><br><span class="line">     * <span class="doctag">@params</span> b asdf asdf  ftb</span><br><span class="line">     * <span class="doctag">@async</span> true ftb</span><br><span class="line">     * <span class="doctag">@cache</span> true ftb</span><br><span class="line">     * <span class="doctag">@type</span> GET ftb</span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">action</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//@ftb</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">anotherAction</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>扫描系统生成javascript交互代码</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node ftb.js .</span><br></pre></td></tr></table></figure>
<ul>
<li>生成目录树结构</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── <span class="tag">com</span></span><br><span class="line">│   └── <span class="tag">iflytek</span></span><br><span class="line">│       └── <span class="tag">ftb</span></span><br><span class="line">│           └── <span class="tag">demo</span><span class="class">.js</span></span><br><span class="line">└── <span class="tag">output</span><span class="class">.js</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">asdf</span>(<span class="params">a,b,cb</span>)</span>&#123;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        url:<span class="string">'http://myftb.com/asdf'</span>,</span><br><span class="line">        type:<span class="string">'GET'</span>,</span><br><span class="line">        dataType:<span class="string">'json'</span>,</span><br><span class="line">        cache:<span class="string">'true'</span>,</span><br><span class="line">        <span class="keyword">async</span>:<span class="string">'true'</span>,</span><br><span class="line">        data:&#123;<span class="string">"a"</span>:a,<span class="string">"b"</span>:b&#125;,</span><br><span class="line">        success:<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">            cb(response);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">anotherAction</span>(<span class="params">cb</span>)</span>&#123;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        url:<span class="string">'http://myftb.com/anotherAction'</span>,</span><br><span class="line">        type:<span class="string">'POST'</span>,</span><br><span class="line">        dataType:<span class="string">'json'</span>,</span><br><span class="line">        cache:<span class="string">'false'</span>,</span><br><span class="line">        <span class="keyword">async</span>:<span class="string">'true'</span>,</span><br><span class="line">        data:&#123;&#125;,</span><br><span class="line">        success:<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">            cb(response);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">actionAlias</span>(<span class="params">a,b,cb</span>)</span>&#123;</span><br><span class="line">	$.ajax(&#123;</span><br><span class="line">		url:<span class="string">'http://myftb.com/actionAlias'</span>,</span><br><span class="line">		type:<span class="string">'GET'</span>,</span><br><span class="line">		dataType:<span class="string">'json'</span>,</span><br><span class="line">		cache:<span class="string">'true'</span>,</span><br><span class="line">		<span class="keyword">async</span>:<span class="string">'true'</span>,</span><br><span class="line">		data:&#123;<span class="string">"a"</span>:a,<span class="string">"b"</span>:b&#125;,</span><br><span class="line">		success:<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">			cb(response);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>前端引入使用</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"./ftb-output/output.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"./ftb-output/com/iflytek/ftb/demo.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="actionscript"></span><br><span class="line">    <span class="keyword">var</span> a, b;</span><br><span class="line">    asdf(a, b, <span class="function"><span class="keyword">function</span><span class="params">(response)</span></span>&#123;</span><br><span class="line">            <span class="comment">//do callback</span></span><br><span class="line">            &#125;);</span><br><span class="line">    anotherAction(<span class="function"><span class="keyword">function</span><span class="params">(response)</span></span>&#123;</span><br><span class="line">            <span class="comment">//do callback</span></span><br><span class="line">            &#125;);</span><br><span class="line">    actionAlias(a, b, <span class="function"><span class="keyword">function</span><span class="params">(reseponse)</span></span>&#123;</span><br><span class="line">            <span class="comment">//do callback</span></span><br><span class="line">        &#125;);</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="todo">todo</h3><ul>
<li><del>引入全局配置</del> done</li>
<li><del>压缩模式/非压缩模式</del> done</li>
<li><del>使用输出模板</del> done</li>
<li><del>优化代码组织结构</del> done</li>
<li><del>单个注释新增个性化配置项</del> done</li>
<li><del>目录遍历读取采取异步模式增加大项目生成效率</del> done</li>
<li><del>输出多文件，支持名字空间</del> done</li>
<li>异步读取文件配置limit，防止同时打开文件操作符过多系统出错</li>
</ul>
<h3 id="联系">联系</h3><p>hellovigoss@gmail.com</p>

    
    
    <footer class="meta">
      
  <div class="cats">
<a href="/categories/design/">design</a></div>

      
      
    </footer>
    
  </div>
  
</article></div>
  <footer id="footer" class="inner"><div class="social alignright">
  
  
  
  
  <a class="rss" href="/atom.xml" title="RSS">RSS</a>
</div>
<p>
  
  &copy; 2015 hellovigoss
  
</p>
<div class="clearfix"></div>
<script type="text/javascript" src="http://tajs.qq.com/stats?sId=42792229" charset="UTF-8"></script>
</footer>
  <script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


<div id="phasebeam">
  <canvas></canvas>
  <canvas></canvas>
  <canvas></canvas>
</div>
<script src="/js/phasebeam.js"></script>
</body>
</html>